{
  "title": "Klant to Partij",
  "description": "Makes sure there are not multiple variants of the same categorie.",
  "$id": "https://commongateway.nl/mapping/klant.klantToPartij.mapping.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.1",
  "passTrough": false,
  "mapping": {
    "_self": "_self",
    "nummer": "klantnummer",
    "subjectType": "soortPartij",
    "organisatie.naam": "bedrijfsnaam",
    "persoon.achternaam": "achternaam",
    "persoon.voornaam": "voornaam",
    "persoon.voorvoegselAchternaam": "voorvoegselAchternaam",
    "bezoekadres": "adressen.0",
    "verstrekteAdressen": "{% if not emails|default %}{% set emails = [] %}{% endif %}{% if not telefoonnummers|default %}{%set telefoonnummers = [] %}{%endif%}{{ map('https://commongateway.nl/mapping/klant.emailToDigitaalAdres.mapping.json', emails, true)|merge(map('https://commongateway.nl/mapping/klant.telefoonnummerToDigitaalAdres.mapping.json', telefoonnummers, true))|json_encode }}",
    "externeIdentificaties.0.partijIdentificator.objectId": "embedded.subjectIdentificatie.inpBsn",
    "externeIdentificaties.0.partijIdentificator.soortObjectId": "bsn",
    "externeIdentificaties.0.partijIdentificator.register": "{brp}",
    "indicatieActief": "true",
    "indicatieGeheimhouding": "false",
    "interneNotitie": "Automatisch aangemaakt vanuit KISS."
  },
  "cast": {
    "verstrekteAdressen": "jsonToArray",
    "bezoekadres": "unsetIfValue==adressen.0",
    "organisatie.naam": "unsetIfValue==",
    "nummer": "int",
    "indicatieActief": "bool",
    "indicatieGeheimhouding": "bool"
  }
}
