{
  "title": "ContactMoment to KlantContact",
  "description": "Makes sure there are not multiple variants of the same categorie. Note Barry: If a todo is set its a contaactverzoek else contactmoment which uses tekst for notitie (correct me if Im wrong) ",
  "$id": "https://commongateway.nl/mapping/klant.contactmomentToKlantContact.mapping.json",
  "$schema": "https://docs.commongateway.nl/schemas/Mapping.schema.json",
  "version": "0.0.3",
  "passTrough": false,
  "mapping": {
    "nummer": "bronorganisatie",
    "geregistreerdOp": "registratiedatum",
    "plaatsgevondenOp": "registratiedatum",
    "kanaal.soortDigitaalAdres": "kanaal",
    "inhoud": "{% if tekst|default %}{{ tekst }}{% endif %}",
    "todo": "{% if todo|default %}{{ todo.description }}{% endif %}",
    "resultaat": "{% if resultaat|default %}{{ resultaat }}{% endif %}",
    "onderwerp": "afwijkendOnderwerp",
    "gaatOver.objectIdentificator.objectId": "{% if zaaknummer|default %}{{ zaaknummer }}{% endif %}",
    "gaatOver.objectIdentificator.objectType": "{% if zaaknummer|default %}{{ 'zaken' }}{% endif %}",
    "gaatOver.objectIdentificator.soortObjectId": "{% if zaaknummer|default %}{{ 'string' }}{% endif %}",
    "gaatOVer.objectIdentificator.register.type": "{% if zrcUrl|default %}{{ zrcUrl }}{% endif %}",
    "indicatieContactGelukt": "{% if tekst|default %}{{ 'ja' }}{% else %}{{ 'nee' }}{% endif %}",
    "actors": "[{% if afdeling|default and afdeling is not iterable %}{% set afdeling = getObject(afdeling) %}{{ '{\"organisatorischeEenheid\":'~map('https://commongateway.nl/mapping/klant.afdelingToOrganisatorischeEenheid.mapping.json', afdeling)|json_encode~'}' }}{% endif %}{% if afdeling|default and afdeling is not iterable and todo.attendees.0|default %}{{ ', '  }}{% endif %}{% if todo.attendees.0|default %}{{ '{\"medewerker\": {\"eMailadres\": \"'~todo.attendees.0~'\"}}' }}{% endif %} ]"
  },
  "cast": {
    "nummer": ["int", "unsetIfValue==bronorganisatie"],
    "gaatOver.objectIdentificator.objectId": "unsetIfValue==",
    "gaatOver.objectIdentificator.objectType": "unsetIfValue==",
    "gaatOver.objectIdentificator.soortObjectId": "unsetIfValue==",
    "gaatOver.objectIdentificator.register.type": "unsetIfValue==",
    "gaatOver.objectIdentificator.register": "unsetIfValue==",
    "gaatOver.objectIdentificator": "unsetIfValue==",
    "gaatOver": "unsetIfValue==",
    "inhoud": "unsetIfValue==",
    "todo": "unsetIfValue==",
    "resultaat": "unsetIfValue==",
    "geregistreerdOp": "unsetIfValue==registratiedatum",
    "plaatsgevondenOp": "unsetIfValue==registratiedatum",
    "onderwerp": "unsetIfValue==afwijkendOnderwerp",
    "kanaal.soortDigitaalAdres": "unsetIfValue==kanaal",
    "kanaal": "unsetIfValue==",
    "actors.0": "unsetIfValue==",
    "actors.1": "unsetIfValue==",
    "actors": ["jsonToArray", "unsetIfValue=="]
  }
}
